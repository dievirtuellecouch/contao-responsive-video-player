(()=>{"use strict";const e=function(){const e={container:null,video:null,buttons:{playToggle:[],fullscreen:[]}},t={isTouchDevice:null,isPlaying:!1,hideControls:!1,playHasBeenClickedAtLeastOneTime:!1};let n=null;const i=function(){t.playHasBeenClickedAtLeastOneTime=!0,e.video.paused?e.video.play():(e.video.pause(),clearTimeout(n)),u()},o=function(){e.video.requestFullscreen?e.video.requestFullscreen():e.video.webkitRequestFullscreen&&e.video.webkitRequestFullscreen()},s=function(){t.isPlaying=!e.video.paused,t.hideControls=t.isPlaying;for(const n of e.buttons.playToggle)n.setAttribute("data-state",t.isPlaying?"playing":"paused");u()};var a=function(){t.isPlaying&&(t.hideControls=!t.hideControls,u(),t.hideControls||(n=setTimeout(l,c())))};const l=function(){clearTimeout(n),t.isPlaying&&(t.hideControls=!0,u())},c=function(){return t.isTouchDevice?2e3:750},r=function(){t.playHasBeenClickedAtLeastOneTime&&(clearTimeout(n),t.hideControls=!1,u(),n=setTimeout(l,c()))},d=function(){t.isTouchDevice?(e.container.addEventListener("click",a),e.container.removeEventListener("mousemove",r)):(e.container.removeEventListener("click",a),e.container.addEventListener("mousemove",r))},u=function(){e.container.setAttribute("data-state",t.isPlaying?"playing":"paused"),e.container.setAttribute("data-hide-controls",t.hideControls),e.container.setAttribute("data-show-play-overlay",!t.playHasBeenClickedAtLeastOneTime)};return{init:function(n){if(null===n)return void console.error("No container for video player found.");if(e.container=n,e.video=n.querySelector("video"),null===e.video)return void console.error("No video element inside video player found.");e.video.addEventListener("play",s),e.video.addEventListener("pause",s);const a=n.querySelectorAll('[data-element="video-player-button"]');for(const t of a)switch(t.getAttribute("data-action")){case"play-toggle":e.buttons.playToggle.push(t),t.addEventListener("click",i);break;case"fullscreen":e.buttons.fullscreen.push(t),t.addEventListener("click",o)}!function(){const e=window.matchMedia("(hover: hover)");t.isTouchDevice=!e.matches,d(),e.addEventListener("change",(e=>{t.isTouchDevice=!e.matches,d()}))}(),e.video.requestFullscreen&&e.video.webkitRequestFullscreen&&e.container.classList.add("video-player_can-fullscreen")}}};var t;t=function(){const t=document.querySelectorAll('[data-module="video-player"]');if(0!=t.length)for(const n of t)(new e).init(n)},"interactive"===document.readyState||"complete"===document.readyState?t():document.addEventListener("DOMContentLoaded",t)})();